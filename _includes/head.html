<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% if page.url == '/' %}{{ page.title | default: site.title }}{% else %}{{ page.title }} | {{ site.title }}{% endif %}</title>
  <meta name="description" content="{{ page.description | default: site.description }}">
  <meta name="keywords" content="{{ page.keywords | default: site.keywords }}">

  <!-- Canonical URL -->
  <link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">

  <!-- Robots meta -->
  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow">

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="{{ page.title | default: site.title }}">
  <meta property="og:description" content="{{ page.description | default: site.description }}">
  <meta property="og:type" content="{% if page.layout == 'post' %}article{% else %}website{% endif %}">
  <meta property="og:url" content="{{ page.url | replace:'index.html','' | absolute_url }}">
  <meta property="og:image" content="{{ page.image | default: site.social.image | absolute_url }}">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="{{ page.title | default: site.title }}">
  <meta property="og:site_name" content="{{ site.title }}">
  {% if page.layout == 'post' %}
  <meta property="article:published_time" content="{{ page.date | default: page.git_created_date | date_to_xmlschema }}">
  <meta property="article:modified_time" content="{{ page.last_modified_at | default: page.git_modified_date | default: page.date | date_to_xmlschema }}">
  <meta property="article:author" content="{{ site.social.profiles | where: 'platform', 'LinkedIn' | map: 'url' | first }}">
  {% for cat in page.categories %}
  <meta property="article:tag" content="{{ cat }}">
  {% endfor %}
  {% endif %}

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ page.title | default: site.title }}">
  <meta name="twitter:description" content="{{ page.description | default: site.description }}">
  <meta name="twitter:image" content="{{ page.image | default: site.social.image | absolute_url }}">
  <meta name="twitter:image:alt" content="{{ page.title | default: site.title }}">
  <meta name="twitter:site" content="@{{ site.social.profiles | where: 'platform', 'X' | map: 'handle' | first }}">
  <meta name="twitter:creator" content="@{{ site.social.profiles | where: 'platform', 'X' | map: 'handle' | first }}">

  <!-- LinkedIn Card Meta Tags -->
  <meta property="linkedin:card" content="summary_large_image">
  <meta property="linkedin:title" content="{{ page.title | default: site.title }}">
  <meta property="linkedin:description" content="{{ page.description | default: site.description }}">
  <meta property="linkedin:image" content="{{ page.image | default: site.social.image | absolute_url }}">
  <meta property="linkedin:author" content="{{ site.social.profiles | where: 'platform', 'LinkedIn' | map: 'url' | first }}">

  <link rel="preload" href="/assets/fonts/inter-latin-wght-normal.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="stylesheet" href="{{ '/assets/css/styles.css' | bust_cache | relative_url }}">
  <link rel="preload" href="{{ '/assets/css/main.css' | bust_cache | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="{{ '/assets/css/main.css' | bust_cache | relative_url }}"></noscript>
  <link rel="preload" href="{{ '/assets/css/native.css' | bust_cache | relative_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="{{ '/assets/css/native.css' | bust_cache | relative_url }}"></noscript>

  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">
  <link rel="manifest" href="/site.webmanifest">

  {% include posthog.html %}

  <!-- Schema.org structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "sbomify",
    "url": "{{ site.url }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ site.url }}/android-chrome-512x512.png",
      "width": 512,
      "height": 512
    },
    "sameAs": [
      {% for profile in site.social.profiles %}"{{ profile.url }}"{% unless forloop.last %},{% endunless %}{% endfor %}
    ],
    "description": {{ site.description | jsonify }}
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "sbomify",
    "applicationCategory": "BusinessApplication",
    "applicationSubCategory": "Supply Chain Security",
    "operatingSystem": "Cloud",
    "offers": [
      {
        "@type": "Offer",
        "name": "Community",
        "price": "0",
        "priceCurrency": "USD",
        "description": "For OSS maintainers and hobby projects",
        "availability": "https://schema.org/InStock"
      },
      {
        "@type": "Offer",
        "name": "Business",
        "price": "199",
        "priceCurrency": "USD",
        "description": "For mid-size teams needing private SBOMs",
        "availability": "https://schema.org/InStock",
        "priceValidUntil": "{{ 'now' | date: '%s' | plus: 2592000 | date: '%Y-%m-%d' }}"
      },
      {
        "@type": "Offer",
        "name": "Enterprise",
        "description": "For large orgs with advanced security & compliance needs. Contact for pricing.",
        "availability": "https://schema.org/InStock"
      }
    ],
    "description": {{ site.description | jsonify }},
    "url": "{{ site.url }}",
    "featureList": [
      "SBOM Generation",
      "SBOM Management",
      "Supply Chain Security",
      "Compliance Management",
      "Vulnerability Tracking"
    ],
    "softwareVersion": "1.0"
  }
  </script>

  {% if page.layout == 'post' %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": ["BlogPosting"{% if page.categories contains "compliance" or page.categories contains "security" or page.categories contains "sbom" or page.title contains "Docker" or page.title contains "Django" or page.title contains "SBOM" %}, "TechArticle"{% endif %}],
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "{{ page.url | absolute_url }}"
    },
    "headline": {{ page.title | jsonify }},
    "description": {{ page.description | default: site.description | jsonify }},
    "image": "{{ page.image | default: site.social.image | absolute_url }}",
    "author": {
      "@type": "Person",
      "name": "{{ page.author.display_name | default: page.author }}",
      "url": "{% assign author_name = page.author.display_name | default: page.author %}{% for author_entry in site.data.authors %}{% assign author_data = author_entry[1] %}{% if author_data.display_name == author_name %}{{ site.url }}/authors/{{ author_data.slug }}/{% break %}{% endif %}{% endfor %}"
    },
    "publisher": {
      "@type": "Organization",
      "name": "sbomify",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ site.url }}/android-chrome-512x512.png"
      }
    },
    "datePublished": "{{ page.date | default: page.git_created_date | date_to_xmlschema }}",
    "dateModified": "{{ page.last_modified_at | default: page.git_modified_date | default: page.date | date_to_xmlschema }}",
    "keywords": [{% for tag in page.tags %}"{{ tag }}"{% unless forloop.last %},{% endunless %}{% endfor %}],
    "articleSection": "{{ page.categories | first }}",
    "wordCount": "{{ content | number_of_words }}",
    "inLanguage": "en-US",
    "speakable": {
      "@type": "SpeakableSpecification",
      "cssSelector": ["h1", ".blog-post > p:first-of-type", "article > p:first-of-type"]
    }
    {%- if page.categories contains "compliance" or page.categories contains "security" or page.categories contains "sbom" or page.title contains "Docker" or page.title contains "Django" or page.title contains "SBOM" -%}
    ,"proficiencyLevel": "{{ page.proficiency_level | default: 'Expert' }}",
    "dependencies": "{{ page.tech_dependencies | default: 'SBOM Tools' }}"
    {%- endif -%}
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "{{ site.url }}"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Blog",
        "item": "{{ site.url }}/blog/"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": {{ page.title | jsonify }},
        "item": "{{ page.url | absolute_url }}"
      }
    ]
  }
  </script>
  {% endif %}

  {% if page.url contains '/case-studies/' and page.url != '/case-studies/' %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Product",
    "name": "sbomify SBOM Management Platform",
    "description": {{ page.description | default: site.description | jsonify }},
    "brand": {
      "@type": "Brand",
      "name": "sbomify"
    },
    "category": "SBOM Management Software",
    "applicationCategory": "Security Software",
    "image": "{{ page.company_logo | default: site.social.image | absolute_url }}"
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "{{ site.url }}"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Case Studies",
        "item": "{{ site.url }}/case-studies/"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": {{ page.title | jsonify }},
        "item": "{{ page.url | absolute_url }}"
      }
    ]
  }
  </script>
  {% endif %}

  {% if page.faq %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {% for qa in page.faq %}
      {
        "@type": "Question",
        "name": {{ qa.question | jsonify }},
        "acceptedAnswer": {
          "@type": "Answer",
          "text": {{ qa.answer | jsonify }}
        }
      }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ]
  }
  </script>
  {% endif %}

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "{{ site.title }}",
    "url": "{{ site.url }}"
  }
  </script>


  {% if page.url contains '/guides/' and page.url != '/guides/' %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "TechArticle",
    "name": {{ page.title | jsonify }},
    "description": {{ page.description | default: site.description | jsonify }},
    "image": "{{ page.image | default: site.social.image | absolute_url }}",
    "proficiencyLevel": "Beginner",
    "inLanguage": "en-US"
  }
  </script>
  {% endif %}

  {% if page.url == '/blog/' or page.url contains '/blog/page/' %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "sbomify Blog",
    "description": "Technical articles about SBOMs, supply chain security, and compliance",
    "url": "{{ site.url }}/blog/",
    "mainEntity": {
      "@type": "ItemList",
      "itemListElement": [
        {% for post in site.posts limit:10 %}
        {
          "@type": "ListItem",
          "position": {{ forloop.index }},
          "url": "{{ post.url | absolute_url }}",
          "name": "{{ post.title | escape }}"
        }{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ]
    }
  }
  </script>
  {% endif %}

  {% if page.url == '/case-studies/' %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "sbomify Case Studies",
    "description": "Customer success stories with sbomify SBOM management",
    "url": "{{ site.url }}/case-studies/",
    "mainEntity": {
      "@type": "ItemList",
      "itemListElement": [
        {% assign case_studies = site.pages | where_exp: "page", "page.url contains '/case-studies/' and page.url != '/case-studies/'" %}
        {% for study in case_studies %}
        {
          "@type": "ListItem",
          "position": {{ forloop.index }},
          "url": "{{ study.url | absolute_url }}",
          "name": "{{ study.title | escape }}"
        }{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ]
    }
  }
  </script>
  {% endif %}

  {% if page.url == '/guides/' %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "SBOM Guides",
    "description": "Technical guides for SBOM generation and management",
    "url": "{{ site.url }}/guides/",
    "mainEntity": {
      "@type": "ItemList",
      "itemListElement": [
        {% assign guides = site.pages | where_exp: "page", "page.url contains '/guides/' and page.url != '/guides/'" %}
        {% for guide in guides %}
        {
          "@type": "ListItem",
          "position": {{ forloop.index }},
          "url": "{{ guide.url | absolute_url }}",
          "name": "{{ guide.title | escape }}"
        }{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ]
    }
  }
  </script>
  {% endif %}
</head>